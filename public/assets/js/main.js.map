{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["\"use strict\";\n\nlet recipes = [];\n\nconst listRecipes = document.querySelector(\".js-recipes\");\nconst saveDatabtn = document.querySelector(\".js-saveData\");\nconst loadDatabtn = document.querySelector(\".js-loadData\");\nconst searchInput = document.querySelector(\".js-text\");\nconst saveBtn = document.querySelector(\".js-savebutton\");\nconst recBtn = document.querySelector(\".js-recoverbutton\");\nconst btnReset = document.querySelector(\".js-delbutton\");\nconst choosenRecipes = document.querySelector(\".js-choosen\");\nconst recipeSelection = document.querySelector(\".js-recipeFavourites\");\nconst favList = document.querySelector(\".recipeFavourites\");\nlet favouritesRecipes = window.localStorage.getItem(\"recipes\")\n  ? JSON.parse(window.localStorage.getItem(\"recipes\"))\n  : [];\n\nfunction getData() {\n  fetch(\"https://api.sampleapis.com/recipes/recipes\")\n    .then((response) => response.json())\n    .then(function (data) {\n      paintRecipes(listRecipes, data);\n      recBtn.addEventListener(\"click\", recRecipes);\n      bindRecipes(data);\n      searchByType(data);\n      handleBtns();\n    })\n    .catch(showError);\n  function showError(error) {\n    // alert(\"Datos no disponibles\");\n    listRecipes.innerHTML = `<button class=\"reload\" onclick=location.reload()>Recargar</button>`;\n  }\n  \n  function paintRecipes(element, recipe) {\n    for (let i = 0; i < recipe.length; i++) {\n      element.innerHTML += `<div id=\"${recipe[i].id}\" class=\"recipe\"><br>${recipe[i].title}<br>Tipo de cocina: ${recipe[i].cuisine}<br>Etiquetas: ${recipe[i].tags}<br> <img class=\"image\"  src=${recipe[i].photoUrl}><br class=\"calories\">Calorias: ${recipe[i].calories}</div>`;\n    }\n  }\n\n  function recRecipes() {\n    listRecipes.innerHTML = \"\";\n    let saveRecipes = JSON.parse(localStorage.getItem(\"recipes\"));\n    paintRecipes(listRecipes, saveRecipes);\n  }\n}\n\nfunction bindRecipes(data) {\n  for (const recipe of document.querySelectorAll(\".recipe\")) {\n    recipe.addEventListener(\"click\", (event) => {\n      const recipeInformation = data.find((recipe) => {\n        if (recipe.id === parseInt(event.currentTarget.id)) {\n          return recipe;\n        }\n      });\n\n      favouritesRecipes.push(recipeInformation);\n\n      const newFav = `<li class=\"fav js-recipeFavourites\" id=${recipeInformation.id}><div class=\"recipe\" >${recipeInformation.title}<br>Tipo de cocina: ${recipeInformation.cuisine}<br>Etiquetas: ${recipeInformation.tags}<br> <img class=\"image\" src=${recipeInformation.photoUrl}><br class=\"calories\">Calorias: ${recipeInformation.calories}</div>`;\n\n      favList.innerHTML += newFav;\n    });\n  }\n}\n\nfunction searchByType(foods) {\n  searchInput.addEventListener(\"input\", (e) => {\n    listRecipes.innerHTML = \"\";\n    const filteredRecipes = [];\n    for (let iFoods = 0; iFoods < foods.length; iFoods++) {\n      if (\n        foods[iFoods].cuisine\n          .toLowerCase()\n          .includes(searchInput.value.toLowerCase())\n      ) {\n        const recipeInformation = foods[iFoods];\n        filteredRecipes.push(recipeInformation);\n        listRecipes.innerHTML += `<div id=\"${recipeInformation.id}\" class=\"recipe\"><br>${recipeInformation.title}<br>Tipo de cocina: ${recipeInformation.cuisine}<br>Etiquetas: ${recipeInformation.tags}<br> <img class=\"image\"  src=${recipeInformation.photoUrl}><br class=\"calories\">Calorias: ${recipeInformation.calories}</div>`;\n      }\n    }\n    bindRecipes(filteredRecipes);\n  });\n}\n\nfunction handleBtns() {\n  saveBtn.addEventListener(\"click\", saveRecipes);\n\n  function saveRecipes() {\n    localStorage.setItem(\"recipes\", JSON.stringify(favouritesRecipes));\n  }\n}"]}